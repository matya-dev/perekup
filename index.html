<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–µ—Ä–µ–∫—É–ø–∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --primary-color: #6b7280;
            --primary-gradient: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
            --bg-primary: #111827;
            --bg-secondary: #1f2937;
            --bg-card: #374151;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --text-muted: #9ca3af;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --border-radius: 20px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --snow-color: rgba(255, 255, 255, 0.8);
        }
        
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #0a0e17;
            color: var(--text-primary);
            min-height: 100vh;
            padding: 0;
            overflow-x: hidden;
            position: relative;
        }
        
        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –ü–ö */
        .desktop-container {
            max-width: 100%;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            background: radial-gradient(circle at 50% 0%, #1a1f2e 0%, #0a0e17 70%);
            position: relative;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π –≤–∏–¥) */
        .app-container {
            width: 100%;
            max-width: 420px;
            height: 90vh;
            max-height: 850px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            border-radius: 30px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            background: var(--bg-primary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 2;
        }
        
        /* –°–Ω–µ–∂–∏–Ω–∫–∏ */
        .snowflakes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .snowflake {
            position: absolute;
            background-color: var(--snow-color);
            border-radius: 50%;
            animation: fall linear infinite;
            opacity: 0.8;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            padding-bottom: 100px;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            font-size: 22px;
            font-weight: 800;
            margin-bottom: 20px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
            letter-spacing: -0.5px;
        }
        
        .section-title i {
            color: var(--primary-color);
        }
        
        /* –§–û–†–ú–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø */
        .add-form {
            background: var(--bg-card);
            border-radius: var(--border-radius);
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-secondary);
            letter-spacing: 0.3px;
        }
        
        .text-input, .number-input, .select-input {
            width: 100%;
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 14px;
            color: var(--text-primary);
            font-family: 'Nunito', sans-serif;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
            letter-spacing: 0.3px;
        }
        
        .text-input:focus, .number-input:focus, .select-input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: rgba(107, 114, 128, 0.05);
        }
        
        .image-upload {
            border: 2px dashed rgba(255, 255, 255, 0.1);
            border-radius: 14px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.02);
            position: relative;
        }
        
        .image-upload:hover {
            border-color: var(--primary-color);
            background: rgba(107, 114, 128, 0.05);
        }
        
        .image-upload i {
            font-size: 36px;
            margin-bottom: 12px;
            color: var(--text-muted);
            display: block;
        }
        
        .image-preview {
            margin-top: 15px;
            border-radius: 12px;
            overflow: hidden;
            max-height: 200px;
            display: none;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }
        
        .add-button {
            width: 100%;
            padding: 18px;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 14px;
            font-family: 'Nunito', sans-serif;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
            letter-spacing: 0.5px;
        }
        
        .add-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(107, 114, 128, 0.3);
        }
        
        .add-button:active {
            transform: translateY(0);
        }
        
        /* –ò–ù–í–ï–ù–¢–ê–†–¨ */
        .inventory-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 10px;
        }
        
        .empty-inventory {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }
        
        .empty-inventory i {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
            display: block;
        }
        
        .item-card {
            background: var(--bg-card);
            border-radius: 18px;
            overflow: hidden;
            position: relative;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
        }
        
        .item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.25);
            border-color: rgba(107, 114, 128, 0.3);
        }
        
        .item-card.sold {
            opacity: 0.7;
        }
        
        .item-image {
            height: 140px;
            background: rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: var(--text-muted);
            position: relative;
        }
        
        .item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .item-sold-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--success);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .item-details {
            padding: 16px;
        }
        
        .item-name {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-primary);
            letter-spacing: 0.2px;
        }
        
        .item-price {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }
        
        .item-price i {
            color: var(--warning);
        }
        
        .item-sell-button {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text-primary);
            font-family: 'Nunito', sans-serif;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            letter-spacing: 0.3px;
        }
        
        .item-sell-button:hover {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        /* –°–¢–ê–¢–ò–°–¢–ò–ö–ê */
        .stats-header {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .stats-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
        }
        
        .stats-card:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.05);
        }
        
        .stats-value {
            font-size: 20px;
            font-weight: 800;
            margin-bottom: 4px;
            color: white;
            letter-spacing: -0.5px;
        }
        
        .profit-positive {
            color: var(--success);
        }
        
        .profit-negative {
            color: var(--danger);
        }
        
        .stats-label {
            font-size: 12px;
            opacity: 0.8;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.85);
            letter-spacing: 0.5px;
        }
        
        .chart-container {
            background: var(--bg-card);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .logs-container {
            background: var(--bg-card);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .log-item {
            padding: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }
        
        .log-item:hover {
            background: rgba(255, 255, 255, 0.02);
        }
        
        .log-item:last-child {
            border-bottom: none;
        }
        
        .log-info {
            flex: 1;
        }
        
        .log-action {
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
            letter-spacing: 0.2px;
        }
        
        .log-item-name {
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .log-amount {
            font-weight: 800;
            font-size: 16px;
        }
        
        .log-profit {
            font-size: 12px;
            margin-top: 4px;
        }
        
        /* –ü–†–û–§–ò–õ–¨ */
        .profile-container {
            padding: 20px;
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding: 25px;
            background: var(--bg-card);
            border-radius: var(--border-radius);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .profile-avatar-large {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--primary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 40px;
            color: white;
            border: 4px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .profile-info h2 {
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 5px;
            letter-spacing: -0.5px;
        }
        
        .profile-info p {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 30px;
        }
        
        .profile-stat-card {
            background: var(--bg-card);
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
        }
        
        .profile-stat-card:hover {
            transform: translateY(-5px);
        }
        
        .profile-stat-value {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }
        
        .profile-stat-label {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 600;
        }
        
        /* –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–†–û–î–ê–ñ–ò */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 30px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .modal-header i {
            font-size: 24px;
            color: var(--primary-color);
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 800;
            color: var(--text-primary);
            letter-spacing: -0.5px;
        }
        
        .modal-item-name {
            color: var(--primary-color);
        }
        
        .price-preview {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .price-row:last-child {
            margin-bottom: 0;
        }
        
        .profit-preview {
            font-weight: 800;
            font-size: 18px;
        }
        
        .modal-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }
        
        .modal-button {
            flex: 1;
            padding: 16px;
            border-radius: 14px;
            font-family: 'Nunito', sans-serif;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            letter-spacing: 0.5px;
        }
        
        .modal-button.confirm {
            background: var(--primary-gradient);
            color: white;
        }
        
        .modal-button.confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(107, 114, 128, 0.3);
        }
        
        .modal-button.cancel {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .modal-button.cancel:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø */
        .navBar_wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
            bottom: 16px;
            left: 0;
            width: 100%;
            height: 60px;
            z-index: 90;
            padding: 0 20px;
        }
        
        .navBar {
            padding: 3px;
            height: 100%;
            background-color: rgba(52, 64, 76, 0.5);
            border-radius: 999px;
            backdrop-filter: blur(20px);
            display: flex;
            gap: 3px;
            position: relative;
            width: 100%;
            max-width: 380px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .navBarHighlight {
            position: absolute;
            top: 3px;
            bottom: 3px;
            width: 80px;
            left: 0;
            background-color: rgba(107, 114, 128, 0.6);
            border-radius: 999px;
            transition: left 0.3s ease, width 0.3s ease;
            z-index: 0;
        }
        
        .navBarTab {
            position: relative;
            z-index: 1;
            width: fit-content;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            border-radius: 999px;
            padding-left: 12px;
            padding-right: 12px;
            cursor: pointer;
            color: var(--text-muted);
            transition: color 0.25s ease;
            flex: 1;
            min-width: 0;
        }
        
        .navBarTab.active {
            color: white;
        }
        
        .navBarTab i {
            font-size: 18px;
            margin-bottom: 2px;
        }
        
        .navBarTab span {
            margin-top: 1.45px;
            text-align: center;
            font-size: 13px;
            font-weight: 600;
        }
        
        /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
        @media (max-width: 768px) {
            .desktop-container {
                padding: 10px;
            }
            
            .app-container {
                height: 95vh;
                max-height: none;
                border-radius: 20px;
            }
            
            .inventory-container {
                grid-template-columns: 1fr;
            }
            
            .stats-header {
                grid-template-columns: 1fr;
            }
            
            .profile-stats {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .main-content {
                padding: 16px;
                padding-bottom: 100px;
            }
            
            .navBar_wrapper {
                padding: 0 16px;
            }
            
            .modal-content {
                padding: 24px;
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
        }
        
        /* –î–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-height: 700px) {
            .app-container {
                height: 95vh;
            }
            
            .item-image {
                height: 120px;
            }
        }
    </style>
</head>
<body>
    <!-- Telegram Web App Initialization -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- –°–Ω–µ–∂–∏–Ω–∫–∏ -->
    <div class="snowflakes" id="snowflakes"></div>
    
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –ü–ö -->
    <div class="desktop-container">
        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
        <div class="app-container">
            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            <div class="main-content">
                <!-- –í–∫–ª–∞–¥–∫–∞ –î–æ–±–∞–≤–∏—Ç—å -->
                <div class="tab-content active" id="tab-add">
                    <h2 class="section-title"><i class="fas fa-plus-circle"></i> –î–æ–±–∞–≤–∏—Ç—å –≤–µ—â—å</h2>
                    
                    <div class="add-form">
                        <div class="input-group">
                            <label class="input-label">–ù–∞–∑–≤–∞–Ω–∏–µ –≤–µ—â–∏</label>
                            <input type="text" class="text-input" id="itemName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ø–æ–≤—ã—à–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–∞">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                            <select class="select-input" id="itemCategory">
                                <option value="üì± –ü—Ä–µ–¥–º–µ—Ç—ã">üì± –ü—Ä–µ–¥–º–µ—Ç—ã</option>
                                <option value="üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç">üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                                <option value="üéí –°—É–º–∫–∏">üéí –°—É–º–∫–∏</option>
                                <option value="üëï –û–¥–µ–∂–¥–∞">üëï –û–¥–µ–∂–¥–∞</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">–¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ ($)</label>
                            <input type="number" class="number-input" id="itemPrice" placeholder="1000000" min="0">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                            <div class="image-upload" id="imageUpload">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <span>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>
                                <input type="file" id="itemImage" accept="image/*" style="display: none;">
                            </div>
                            <div class="image-preview" id="imagePreview">
                                <img id="previewImage" src="" alt="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä">
                            </div>
                        </div>
                        
                        <button class="add-button" id="addItemBtn">
                            <i class="fas fa-cart-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                        </button>
                    </div>
                </div>
                
                <!-- –í–∫–ª–∞–¥–∫–∞ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
                <div class="tab-content" id="tab-inventory">
                    <h2 class="section-title"><i class="fas fa-box-open"></i> –ú–æ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
                    
                    <div class="inventory-container" id="inventoryContainer">
                        <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ -->
                        <div class="empty-inventory">
                            <i class="fas fa-box-open"></i>
                            <p>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</p>
                            <p style="margin-top: 8px; font-size: 14px;">–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –≤–µ—â—å!</p>
                        </div>
                    </div>
                </div>
                
                <!-- –í–∫–ª–∞–¥–∫–∞ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="tab-content" id="tab-stats">
                    <h2 class="section-title"><i class="fas fa-chart-line"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    
                    <div class="stats-header">
                        <div class="stats-card">
                            <div class="stats-value" id="statBalance">0 $</div>
                            <div class="stats-label">–ë–∞–ª–∞–Ω—Å</div>
                        </div>
                        <div class="stats-card">
                            <div class="stats-value" id="statProfit">0 $</div>
                            <div class="stats-label">–ü—Ä–∏–±—ã–ª—å</div>
                        </div>
                        <div class="stats-card">
                            <div class="stats-value" id="statItems">0</div>
                            <div class="stats-label">–í–µ—â–∏</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="profitChart"></canvas>
                    </div>
                    
                    <div class="logs-container">
                        <h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 800;">–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
                        <div id="logsList">
                            <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –ª–æ–≥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π -->
                            <div style="text-align: center; padding: 40px 20px; color: var(--text-muted);">
                                <i class="fas fa-history" style="font-size: 36px; margin-bottom: 12px; display: block;"></i>
                                <p>–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø—É—Å—Ç–∞</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –í–∫–ª–∞–¥–∫–∞ –ü—Ä–æ—Ñ–∏–ª—å -->
                <div class="tab-content" id="tab-profile">
                    <div class="profile-container">
                        <div class="profile-header">
                            <div class="profile-avatar-large" id="profileAvatarLarge">
                                <span id="profileAvatarText">U</span>
                            </div>
                            <div class="profile-info">
                                <h2 id="profileName">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                                <p id="profileUsername">@username</p>
                                <p style="color: var(--primary-color); font-size: 14px;">
                                    <i class="fas fa-calendar-alt"></i> –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: <span id="profileJoinDate">–°–µ–≥–æ–¥–Ω—è</span>
                                </p>
                            </div>
                        </div>
                        
                        <div class="profile-stats">
                            <div class="profile-stat-card">
                                <div class="profile-stat-value" id="profileTotalItems">0</div>
                                <div class="profile-stat-label">–í—Å–µ–≥–æ –≤–µ—â–µ–π</div>
                            </div>
                            <div class="profile-stat-card">
                                <div class="profile-stat-value" id="profileSoldItems">0</div>
                                <div class="profile-stat-label">–ü—Ä–æ–¥–∞–Ω–æ</div>
                            </div>
                            <div class="profile-stat-card">
                                <div class="profile-stat-value" id="profileTotalProfit">0 $</div>
                                <div class="profile-stat-label">–û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å</div>
                            </div>
                            <div class="profile-stat-card">
                                <div class="profile-stat-value" id="profileSuccessRate">0%</div>
                                <div class="profile-stat-label">–£—Å–ø–µ—à–Ω–æ—Å—Ç—å</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
            <div class="navBar_wrapper">
                <div class="navBar" id="navBar">
                    <div class="navBarHighlight" id="navBarHighlight"></div>
                    <div class="navBarTab active" data-tab="tab-add">
                        <i class="fas fa-plus-circle"></i>
                        <span>–î–æ–±–∞–≤–∏—Ç—å</span>
                    </div>
                    <div class="navBarTab" data-tab="tab-inventory">
                        <i class="fas fa-box-open"></i>
                        <span>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</span>
                    </div>
                    <div class="navBarTab" data-tab="tab-stats">
                        <i class="fas fa-chart-line"></i>
                        <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                    </div>
                    <div class="navBarTab" data-tab="tab-profile">
                        <i class="fas fa-user"></i>
                        <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–¥–∞–∂–∏ -->
    <div class="modal-overlay" id="sellModal">
        <div class="modal-content">
            <div class="modal-header">
                <i class="fas fa-tags"></i>
                <div class="modal-title">–ü—Ä–æ–¥–∞—Ç—å <span class="modal-item-name" id="modalItemName">–≤–µ—â—å</span></div>
            </div>
            
            <div class="input-group">
                <label class="input-label">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ ($)</label>
                <input type="number" class="number-input" id="sellPrice" placeholder="15000" min="0">
            </div>
            
            <div class="price-preview">
                <div class="price-row">
                    <span>–ö—É–ø–ª–µ–Ω–æ –∑–∞:</span>
                    <span id="modalBuyPrice">0 $</span>
                </div>
                <div class="price-row">
                    <span>–ü—Ä–∏–±—ã–ª—å:</span>
                    <span class="profit-preview" id="modalProfitPreview">0 $</span>
                </div>
                <div class="price-row">
                    <span>–†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å:</span>
                    <span id="modalProfitPercentPreview">0%</span>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="modal-button cancel" id="cancelSellBtn">
                    <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞
                </button>
                <button class="modal-button confirm" id="confirmSellBtn">
                    <i class="fas fa-check"></i> –ü—Ä–æ–¥–∞—Ç—å
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            // Telegram Web App –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            let tg = window.Telegram.WebApp;
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
            if (tg) {
                tg.expand();
                tg.enableClosingConfirmation();
            }
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ
            const user = tg && tg.initDataUnsafe ? tg.initDataUnsafe.user : null;
            let userProfile = {
                isLoggedIn: true,
                id: user?.id || Date.now(),
                firstName: user?.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
                lastName: user?.last_name || '',
                username: user?.username || 'user_' + Math.floor(Math.random() * 10000),
                photoUrl: user?.photo_url || null,
                joinDate: new Date().toLocaleDateString('ru-RU')
            };
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
            const navBar = document.getElementById('navBar');
            const navBarHighlight = document.getElementById('navBarHighlight');
            const navTabs = document.querySelectorAll('.navBarTab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
            const itemNameInput = document.getElementById('itemName');
            const itemCategoryInput = document.getElementById('itemCategory');
            const itemPriceInput = document.getElementById('itemPrice');
            const itemImageInput = document.getElementById('itemImage');
            const imageUpload = document.getElementById('imageUpload');
            const imagePreview = document.getElementById('imagePreview');
            const previewImage = document.getElementById('previewImage');
            const addItemBtn = document.getElementById('addItemBtn');
            const inventoryContainer = document.getElementById('inventoryContainer');
            const logsList = document.getElementById('logsList');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            const statBalance = document.getElementById('statBalance');
            const statProfit = document.getElementById('statProfit');
            const statItems = document.getElementById('statItems');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã –ø—Ä–æ—Ñ–∏–ª—è
            const profileAvatarLarge = document.getElementById('profileAvatarLarge');
            const profileAvatarText = document.getElementById('profileAvatarText');
            const profileName = document.getElementById('profileName');
            const profileUsername = document.getElementById('profileUsername');
            const profileJoinDate = document.getElementById('profileJoinDate');
            const profileTotalItems = document.getElementById('profileTotalItems');
            const profileSoldItems = document.getElementById('profileSoldItems');
            const profileTotalProfit = document.getElementById('profileTotalProfit');
            const profileSuccessRate = document.getElementById('profileSuccessRate');
            
            // –°–Ω–µ–∂–∏–Ω–∫–∏
            const snowflakesContainer = document.getElementById('snowflakes');
            
            // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            const sellModal = document.getElementById('sellModal');
            const modalItemName = document.getElementById('modalItemName');
            const modalBuyPrice = document.getElementById('modalBuyPrice');
            const modalProfitPreview = document.getElementById('modalProfitPreview');
            const modalProfitPercentPreview = document.getElementById('modalProfitPercentPreview');
            const sellPriceInput = document.getElementById('sellPrice');
            const cancelSellBtn = document.getElementById('cancelSellBtn');
            const confirmSellBtn = document.getElementById('confirmSellBtn');
            
            // –ì—Ä–∞—Ñ–∏–∫
            let profitChart;
            const ctx = document.getElementById('profitChart').getContext('2d');
            
            // –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            let inventory = [];
            let balance = 10000; // –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
            let totalProfit = 0;
            let totalInvestment = 0;
            let transactionHistory = [];
            let currentSellingItem = null;
            
            // –ö–∞—Å—Ç–æ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            let notificationTimeout;
            const notificationElement = document.createElement('div');
            notificationElement.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--success);
                color: white;
                padding: 12px 24px;
                border-radius: 12px;
                font-weight: 600;
                z-index: 10000;
                box-shadow: 0 5px 20px rgba(0,0,0,0.3);
                transform: translateX(150%);
                transition: transform 0.3s ease;
                max-width: 300px;
            `;
            document.body.appendChild(notificationElement);
            
            // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
            const balanceModal = document.createElement('div');
            balanceModal.className = 'modal-overlay';
            balanceModal.style.display = 'none';
            balanceModal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <i class="fas fa-wallet"></i>
                        <div class="modal-title">–ò–∑–º–µ–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</div>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: <span id="currentBalanceDisplay">${balance.toLocaleString()} $</span></label>
                        <input type="number" class="number-input" id="newBalance" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ" min="0" value="${balance}">
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">–î–µ–π—Å—Ç–≤–∏–µ</label>
                        <select class="select-input" id="balanceAction">
                            <option value="set">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ</option>
                            <option value="add">–î–æ–±–∞–≤–∏—Ç—å</option>
                            <option value="subtract">–í—ã—á–µ—Å—Ç—å</option>
                        </select>
                    </div>
                    
                    <div class="price-preview">
                        <div class="price-row">
                            <span>–°—Ç–∞—Ä—ã–π –±–∞–ª–∞–Ω—Å:</span>
                            <span id="oldBalanceDisplay">${balance.toLocaleString()} $</span>
                        </div>
                        <div class="price-row">
                            <span>–ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å:</span>
                            <span id="newBalanceDisplay">${balance.toLocaleString()} $</span>
                        </div>
                        <div class="price-row">
                            <span>–ò–∑–º–µ–Ω–µ–Ω–∏–µ:</span>
                            <span id="balanceChangeDisplay">0 $</span>
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <button class="modal-button cancel" id="cancelBalanceBtn">
                            <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞
                        </button>
                        <button class="modal-button confirm" id="confirmBalanceBtn">
                            <i class="fas fa-check"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(balanceModal);
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
            loadData();
            
            // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            function updateUserProfile() {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const fullName = userProfile.firstName + (userProfile.lastName ? ' ' + userProfile.lastName : '');
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤–∞—Ç–∞—Ä
                profileAvatarText.textContent = userProfile.firstName.charAt(0).toUpperCase();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å
                profileName.textContent = fullName;
                profileUsername.textContent = '@' + userProfile.username;
                profileJoinDate.textContent = userProfile.joinDate;
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram
                if (tg && tg.MainButton) {
                    tg.MainButton.setText(`–ë–∞–ª–∞–Ω—Å: ${balance} $`);
                    tg.MainButton.show();
                }
            }
            
            // –°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–µ–∂–∏–Ω–æ–∫ (–±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Å–Ω–µ–≥–æ–ø–∞–¥)
            function createSnowflakes() {
                const snowflakeCount = 80;
                snowflakesContainer.innerHTML = '';
                
                // –°–æ–∑–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ —Å–Ω–µ–∂–∏–Ω–∫–∏
                for (let i = 0; i < snowflakeCount; i++) {
                    createSnowflake(i * 200); // –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Å–Ω–µ–∂–∏–Ω–∫–∏ –∫–∞–∂–¥—ã–µ 300–º—Å
                setInterval(() => {
                    createSnowflake(0);
                    // –£–¥–∞–ª—è–µ–º —Å–Ω–µ–∂–∏–Ω–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ —É–ø–∞–ª–∏
                    const snowflakes = document.querySelectorAll('.snowflake');
                    if (snowflakes.length > 150) {
                        snowflakes[0].remove();
                    }
                }, 300);
            }
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –æ–¥–Ω–æ–π —Å–Ω–µ–∂–∏–Ω–∫–∏
            function createSnowflake(delay = 0) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');
                
                // –°–ª—É—á–∞–π–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
                const size = Math.random() * 8 + 4;
                const left = Math.random() * 100;
                const duration = Math.random() * 15 + 10;
                const opacity = Math.random() * 0.6 + 0.3;
                
                snowflake.style.width = `${size}px`;
                snowflake.style.height = `${size}px`;
                snowflake.style.left = `${left}%`;
                snowflake.style.top = `-20px`;
                snowflake.style.animationDuration = `${duration}s`;
                snowflake.style.animationDelay = `${delay}ms`;
                snowflake.style.opacity = opacity;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Å—Ç–æ–º–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é
                snowflake.style.animation = `fall ${duration}s linear ${delay}ms infinite`;
                
                snowflakesContainer.appendChild(snowflake);
                
                // –£–¥–∞–ª—è–µ–º —Å–Ω–µ–∂–∏–Ω–∫—É –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
                setTimeout(() => {
                    if (snowflake.parentNode) {
                        snowflake.remove();
                    }
                }, duration * 1000 + delay);
            }
            
            // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            function updateNavHighlight() {
                const activeTab = document.querySelector('.navBarTab.active');
                if (activeTab && navBarHighlight) {
                    const tabRect = activeTab.getBoundingClientRect();
                    const navRect = navBar.getBoundingClientRect();
                    
                    navBarHighlight.style.width = tabRect.width + 'px';
                    navBarHighlight.style.left = (tabRect.left - navRect.left) + 'px';
                }
            }
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            function setupNavigation() {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏
                updateNavHighlight();
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤ –ø–æ –≤–∫–ª–∞–¥–∫–∞–º
                navTabs.forEach(tab => {
                    tab.addEventListener('click', function(e) {
                        e.preventDefault();
                        const tabId = this.getAttribute('data-tab');
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
                        navTabs.forEach(t => t.classList.remove('active'));
                        this.classList.add('active');
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
                        tabContents.forEach(content => {
                            content.classList.remove('active');
                            if (content.id === tabId) {
                                content.classList.add('active');
                            }
                        });
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É
                        updateNavHighlight();
                        
                        // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –≤–µ—Ä—Ö—É –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
                        document.querySelector('.main-content').scrollTop = 0;
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É –ø—Ä–æ—Ñ–∏–ª—è
                        if (tabId === 'tab-profile') {
                            updateProfileTab();
                        }
                    });
                });
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞
                window.addEventListener('resize', updateNavHighlight);
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
            function updateProfileTab() {
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –µ—Å–ª–∏ –µ—ë –µ—â–µ –Ω–µ—Ç
                let balanceBtn = document.getElementById('editBalanceBtn');
                if (!balanceBtn) {
                    const profileStats = document.querySelector('.profile-stats');
                    const balanceCard = document.createElement('div');
                    balanceCard.className = 'profile-stat-card';
                    balanceCard.style.cursor = 'pointer';
                    balanceCard.id = 'editBalanceBtn';
                    balanceCard.innerHTML = `
                        <div class="profile-stat-value" style="color: var(--warning)">
                            <i class="fas fa-edit"></i> –ë–∞–ª–∞–Ω—Å
                        </div>
                        <div class="profile-stat-label">–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å</div>
                    `;
                    profileStats.appendChild(balanceCard);
                    
                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ
                    balanceCard.addEventListener('click', openBalanceModal);
                }
            }
            
            // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É
            function switchToTab(tabId) {
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
                navTabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                const tabElement = document.querySelector(`.navBarTab[data-tab="${tabId}"]`);
                const contentElement = document.getElementById(tabId);
                
                if (tabElement && contentElement) {
                    tabElement.classList.add('active');
                    contentElement.classList.add('active');
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É
                    updateNavHighlight();
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É –ø—Ä–æ—Ñ–∏–ª—è
                    if (tabId === 'tab-profile') {
                        updateProfileTab();
                    }
                }
            }
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            imageUpload.addEventListener('click', function() {
                itemImageInput.click();
            });
            
            itemImageInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file && file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        previewImage.src = event.target.result;
                        imagePreview.style.display = 'block';
                        imageUpload.style.display = 'none';
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ—â–∏ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
            addItemBtn.addEventListener('click', function() {
                addNewItem();
            });
            
            // –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ Enter –≤ —Ñ–æ—Ä–º–µ
            itemNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addNewItem();
            });
            
            itemPriceInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addNewItem();
            });
            
            function addNewItem() {
                const name = itemNameInput.value.trim();
                const category = itemCategoryInput.value;
                const price = parseFloat(itemPriceInput.value);
                const imageFile = itemImageInput.files[0];
                
                if (!name) {
                    showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–µ—â–∏', 'danger');
                    itemNameInput.focus();
                    return;
                }
                
                if (!price || price <= 0) {
                    showNotification('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ü–µ–Ω—É –ø–æ–∫—É–ø–∫–∏', 'danger');
                    itemPriceInput.focus();
                    return;
                }
                
                if (price > balance) {
                    showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ!', 'danger');
                    itemPriceInput.focus();
                    return;
                }
                
                // –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≤–µ—â–∏
                const item = {
                    id: Date.now(),
                    name: name,
                    category: category,
                    buyPrice: price,
                    sellPrice: null,
                    sold: false,
                    image: null,
                    dateAdded: new Date().toISOString(),
                    dateSold: null
                };
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                if (imageFile && imageFile.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        item.image = event.target.result;
                        addItemToInventory(item);
                    };
                    reader.readAsDataURL(imageFile);
                } else {
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç–º–æ–¥–∑–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                    const emoji = category.split(' ')[0];
                    item.image = emoji;
                    addItemToInventory(item);
                }
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–µ—â–∏ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
            function addItemToInventory(item) {
                console.log('–î–æ–±–∞–≤–ª—è–µ–º –≤–µ—â—å –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å:', item);
                
                inventory.push(item);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å (–ø–æ–∫—É–ø–∫–∞ —É–º–µ–Ω—å—à–∞–µ—Ç –±–∞–ª–∞–Ω—Å)
                balance -= item.buyPrice;
                totalInvestment += item.buyPrice;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
                addTransactionLog('–ü–æ–∫—É–ø–∫–∞', item.name, -item.buyPrice, 0, new Date().toLocaleString('ru-RU'));
                
                // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                itemNameInput.value = '';
                itemPriceInput.value = '';
                itemImageInput.value = '';
                imagePreview.style.display = 'none';
                previewImage.src = '';
                imageUpload.style.display = 'block';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification(`‚úÖ "${item.name}" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∑–∞ ${item.buyPrice} $!`, 'success');
                
                // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
                setTimeout(() => {
                    switchToTab('tab-inventory');
                }, 100);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                updateUI();
                saveData();
                
                console.log('–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:', inventory);
            }
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            function showNotification(message, type = 'info') {
                // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä
                if (notificationTimeout) {
                    clearTimeout(notificationTimeout);
                }
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
                const colors = {
                    'success': '#10b981',
                    'danger': '#ef4444',
                    'warning': '#f59e0b',
                    'info': '#6b7280'
                };
                
                notificationElement.style.backgroundColor = colors[type] || colors.info;
                notificationElement.textContent = message;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                notificationElement.style.transform = 'translateX(0)';
                
                // –°–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                notificationTimeout = setTimeout(() => {
                    notificationElement.style.transform = 'translateX(150%)';
                }, 3000);
                
                // –¢–∞–∫–∂–µ –≤—ã–≤–æ–¥–∏–º –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
                console.log('–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:', message);
            }
            
            // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
            function openBalanceModal() {
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞
                document.getElementById('currentBalanceDisplay').textContent = balance.toLocaleString() + ' $';
                document.getElementById('oldBalanceDisplay').textContent = balance.toLocaleString() + ' $';
                document.getElementById('newBalance').value = balance;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
                updateBalancePreview();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                balanceModal.style.display = 'flex';
                
                // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
                setTimeout(() => {
                    document.getElementById('newBalance').focus();
                }, 100);
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
            function updateBalancePreview() {
                const newBalanceInput = parseFloat(document.getElementById('newBalance').value) || 0;
                const action = document.getElementById('balanceAction').value;
                
                let newBalance = balance;
                let change = 0;
                
                switch(action) {
                    case 'set':
                        newBalance = newBalanceInput;
                        change = newBalance - balance;
                        break;
                    case 'add':
                        newBalance = balance + newBalanceInput;
                        change = newBalanceInput;
                        break;
                    case 'subtract':
                        newBalance = balance - newBalanceInput;
                        change = -newBalanceInput;
                        break;
                }
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
                if (newBalance < 0) {
                    newBalance = 0;
                    change = -balance;
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                document.getElementById('newBalanceDisplay').textContent = newBalance.toLocaleString() + ' $';
                document.getElementById('balanceChangeDisplay').textContent = (change >= 0 ? '+' : '') + change.toLocaleString() + ' $';
                
                // –¶–≤–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
                const changeElement = document.getElementById('balanceChangeDisplay');
                if (change > 0) {
                    changeElement.style.color = 'var(--success)';
                } else if (change < 0) {
                    changeElement.style.color = 'var(--danger)';
                } else {
                    changeElement.style.color = 'var(--text-primary)';
                }
            }
            
            // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏
            function openSellModal(item) {
                currentSellingItem = item;
                modalItemName.textContent = item.name;
                modalBuyPrice.textContent = item.buyPrice.toLocaleString() + ' $';
                sellPriceInput.value = '';
                sellPriceInput.focus();
                
                sellModal.style.display = 'flex';
                updateProfitPreview();
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                sellPriceInput.addEventListener('input', updateProfitPreview);
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏–±—ã–ª–∏
            function updateProfitPreview() {
                const sellPrice = parseFloat(sellPriceInput.value) || 0;
                const buyPrice = currentSellingItem.buyPrice;
                const profit = sellPrice - buyPrice;
                const profitPercent = buyPrice > 0 ? (profit / buyPrice * 100).toFixed(1) : 0;
                
                modalProfitPreview.textContent = (profit >= 0 ? '+' : '') + profit.toLocaleString() + ' $';
                modalProfitPercentPreview.textContent = (profit >= 0 ? '+' : '') + profitPercent + '%';
                
                // –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–∏–±—ã–ª–∏
                if (profit > 0) {
                    modalProfitPreview.style.color = 'var(--success)';
                    modalProfitPercentPreview.style.color = 'var(--success)';
                } else if (profit < 0) {
                    modalProfitPreview.style.color = 'var(--danger)';
                    modalProfitPercentPreview.style.color = 'var(--danger)';
                } else {
                    modalProfitPreview.style.color = 'var(--text-primary)';
                    modalProfitPercentPreview.style.color = 'var(--text-primary)';
                }
            }
            
            // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
            document.addEventListener('click', function(e) {
                if (e.target.id === 'confirmBalanceBtn') {
                    const newBalanceInput = parseFloat(document.getElementById('newBalance').value) || 0;
                    const action = document.getElementById('balanceAction').value;
                    
                    let newBalance = balance;
                    let change = 0;
                    
                    switch(action) {
                        case 'set':
                            newBalance = newBalanceInput;
                            change = newBalance - balance;
                            break;
                        case 'add':
                            newBalance = balance + newBalanceInput;
                            change = newBalanceInput;
                            break;
                        case 'subtract':
                            newBalance = balance - newBalanceInput;
                            change = -newBalanceInput;
                            break;
                    }
                    
                    // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
                    if (newBalance < 0) {
                        newBalance = 0;
                        change = -balance;
                    }
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
                    const oldBalance = balance;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
                    balance = newBalance;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
                    if (change !== 0) {
                        const actionText = action === 'set' ? '–ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞' : 
                                        action === 'add' ? '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞' : '–°–ø–∏—Å–∞–Ω–∏–µ —Å –±–∞–ª–∞–Ω—Å–∞';
                        addTransactionLog(actionText, '–†—É—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ', change, 0, new Date().toLocaleString('ru-RU'));
                    }
                    
                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                    balanceModal.style.display = 'none';
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                    if (change > 0) {
                        showNotification(`‚úÖ –ë–∞–ª–∞–Ω—Å —É–≤–µ–ª–∏—á–µ–Ω –Ω–∞ ${change} $! –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: ${balance} $`, 'success');
                    } else if (change < 0) {
                        showNotification(`‚ö†Ô∏è –ë–∞–ª–∞–Ω—Å —É–º–µ–Ω—å—à–µ–Ω –Ω–∞ ${Math.abs(change)} $! –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: ${balance} $`, 'warning');
                    } else {
                        showNotification('–ë–∞–ª–∞–Ω—Å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è', 'info');
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                    updateUI();
                    saveData();
                }
                
                if (e.target.id === 'cancelBalanceBtn' || e.target === balanceModal) {
                    balanceModal.style.display = 'none';
                }
            });
            
            // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏
            confirmSellBtn.addEventListener('click', function() {
                const sellPrice = parseFloat(sellPriceInput.value);
                
                if (!sellPrice || sellPrice <= 0) {
                    showNotification('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ü–µ–Ω—É –ø—Ä–æ–¥–∞–∂–∏', 'danger');
                    return;
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤–µ—â–∏
                currentSellingItem.sellPrice = sellPrice;
                currentSellingItem.sold = true;
                currentSellingItem.dateSold = new Date().toISOString();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å (–ø—Ä–æ–¥–∞–∂–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å)
                balance += sellPrice;
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–∏–±—ã–ª—å –æ—Ç —ç—Ç–æ–π —Å–¥–µ–ª–∫–∏
                const itemProfit = sellPrice - currentSellingItem.buyPrice;
                totalProfit += itemProfit;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
                const profitPercent = currentSellingItem.buyPrice > 0 ? 
                    (itemProfit / currentSellingItem.buyPrice * 100).toFixed(1) : 0;
                
                addTransactionLog('–ü—Ä–æ–¥–∞–∂–∞', currentSellingItem.name, sellPrice, itemProfit, new Date().toLocaleString('ru-RU'), profitPercent);
                
                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                sellModal.style.display = 'none';
                
                // –£–¥–∞–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
                sellPriceInput.removeEventListener('input', updateProfitPreview);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification(`‚úÖ "${currentSellingItem.name}" –ø—Ä–æ–¥–∞–Ω–∞ –∑–∞ ${sellPrice} $! –ü—Ä–∏–±—ã–ª—å: ${itemProfit} $`, 'success');
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                updateUI();
                saveData();
            });
            
            // –û—Ç–º–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏
            cancelSellBtn.addEventListener('click', function() {
                sellModal.style.display = 'none';
                sellPriceInput.removeEventListener('input', updateProfitPreview);
                currentSellingItem = null;
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ
            sellModal.addEventListener('click', function(e) {
                if (e.target === sellModal) {
                    sellModal.style.display = 'none';
                    sellPriceInput.removeEventListener('input', updateProfitPreview);
                    currentSellingItem = null;
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –±–∞–ª–∞–Ω—Å–∞
            document.getElementById('newBalance')?.addEventListener('input', updateBalancePreview);
            document.getElementById('balanceAction')?.addEventListener('change', updateBalancePreview);
            
            // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            function updateUI() {
                console.log('–û–±–Ω–æ–≤–ª—è–µ–º UI, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å:', inventory);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                statBalance.textContent = balance.toLocaleString() + ' $';
                statProfit.textContent = (totalProfit >= 0 ? '+' : '') + totalProfit.toLocaleString() + ' $';
                statItems.textContent = inventory.length;
                
                // –¶–≤–µ—Ç –ø—Ä–∏–±—ã–ª–∏
                if (totalProfit > 0) {
                    statProfit.className = 'stats-value profit-positive';
                } else if (totalProfit < 0) {
                    statProfit.className = 'stats-value profit-negative';
                } else {
                    statProfit.className = 'stats-value';
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ—Ñ–∏–ª—è
                const soldItems = inventory.filter(item => item.sold).length;
                const successRate = inventory.length > 0 ? Math.round((soldItems / inventory.length) * 100) : 0;
                
                profileTotalItems.textContent = inventory.length;
                profileSoldItems.textContent = soldItems;
                profileTotalProfit.textContent = (totalProfit >= 0 ? '+' : '') + totalProfit.toLocaleString() + ' $';
                profileSuccessRate.textContent = successRate + '%';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                renderInventory();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≥—Ä–∞—Ñ–∏–∫
                updateChart();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏—Å—Ç–æ—Ä–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π
                renderLogs();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤ Telegram
                if (tg && tg.MainButton) {
                    tg.MainButton.setText(`–ë–∞–ª–∞–Ω—Å: ${balance.toLocaleString()} $`);
                }
            }
            
            // –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
            function renderInventory() {
                console.log('–û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å:', inventory);
                
                inventoryContainer.innerHTML = '';
                
                if (inventory.length === 0) {
                    inventoryContainer.innerHTML = `
                        <div class="empty-inventory">
                            <i class="fas fa-box-open"></i>
                            <p>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</p>
                            <p style="margin-top: 8px; font-size: 14px;">–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –≤–µ—â—å!</p>
                        </div>
                    `;
                    return;
                }
                
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å: –Ω–µ–ø—Ä–æ–¥–∞–Ω–Ω—ã–µ –≤–µ—â–∏ –ø–µ—Ä–≤—ã–º–∏
                const sortedInventory = [...inventory].sort((a, b) => {
                    if (a.sold && !b.sold) return 1;
                    if (!a.sold && b.sold) return -1;
                    return new Date(b.dateAdded) - new Date(a.dateAdded);
                });
                
                sortedInventory.forEach(item => {
                    const itemCard = document.createElement('div');
                    itemCard.className = 'item-card' + (item.sold ? ' sold' : '');
                    itemCard.setAttribute('data-id', item.id);
                    
                    // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
                    let imageContent = '';
                    if (item.image && item.image.startsWith('data:image')) {
                        imageContent = `<img src="${item.image}" alt="${item.name}">`;
                    } else {
                        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç–º–æ–¥–∑–∏
                        imageContent = `<div style="font-size: 48px; height: 100%; display: flex; align-items: center; justify-content: center;">${item.image || 'üì¶'}</div>`;
                    }
                    
                    // –ë–µ–π–¥–∂ –¥–ª—è –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
                    let soldBadge = '';
                    if (item.sold) {
                        const profit = item.sellPrice - item.buyPrice;
                        const profitPercent = item.buyPrice > 0 ? Math.round((profit / item.buyPrice) * 100) : 0;
                        const badgeColor = profit >= 0 ? 'var(--success)' : 'var(--danger)';
                        soldBadge = `<div class="item-sold-badge" style="background: ${badgeColor}">
                            <i class="fas ${profit >= 0 ? 'fa-arrow-up' : 'fa-arrow-down'}"></i>
                            ${profit >= 0 ? '+' : ''}${profitPercent}%
                        </div>`;
                    }
                    
                    // –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ–¥–∞–∂–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤)
                    let sellButton = '';
                    if (!item.sold) {
                        sellButton = `
                            <button class="item-sell-button" data-id="${item.id}">
                                <i class="fas fa-tag"></i> –ü—Ä–æ–¥–∞—Ç—å
                            </button>
                        `;
                    }
                    
                    itemCard.innerHTML = `
                        <div class="item-image">
                            ${imageContent}
                            ${soldBadge}
                        </div>
                        <div class="item-details">
                            <div class="item-name">${item.name}</div>
                            <div class="item-price">
                                <i class="fas fa-shopping-cart"></i> ${item.buyPrice.toLocaleString()} $
                            </div>
                            ${item.sold ? `<div class="item-price"><i class="fas fa-tag"></i> –ü—Ä–æ–¥–∞–Ω–æ: ${item.sellPrice.toLocaleString()} $</div>` : ''}
                            ${sellButton}
                        </div>
                    `;
                    
                    inventoryContainer.appendChild(itemCard);
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –ø—Ä–æ–¥–∞–∂–∏
                document.querySelectorAll('.item-sell-button').forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const itemId = parseInt(this.getAttribute('data-id'));
                        const item = inventory.find(item => item.id === itemId);
                        if (item) {
                            openSellModal(item);
                        }
                    });
                });
            }
            
            // –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –ª–æ–≥–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π
            function renderLogs() {
                logsList.innerHTML = '';
                
                if (transactionHistory.length === 0) {
                    logsList.innerHTML = `
                        <div style="text-align: center; padding: 40px 20px; color: var(--text-muted);">
                            <i class="fas fa-history" style="font-size: 36px; margin-bottom: 12px; display: block;"></i>
                            <p>–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø—É—Å—Ç–∞</p>
                        </div>
                    `;
                    return;
                }
                
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏ –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
                const sortedLogs = [...transactionHistory].sort((a, b) => new Date(b.date) - new Date(a.date));
                
                sortedLogs.forEach(log => {
                    const logItem = document.createElement('div');
                    logItem.className = 'log-item';
                    
                    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–≤–µ—Ç –¥–ª—è –ø—Ä–∏–±—ã–ª–∏
                    const profitColor = log.profit >= 0 ? 'var(--success)' : 'var(--danger)';
                    const profitSign = log.profit >= 0 ? '+' : '';
                    
                    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–∫–æ–Ω–∫—É
                    const icon = log.type === '–ü–æ–∫—É–ø–∫–∞' ? 'fa-shopping-cart' : 
                            log.type.includes('–±–∞–ª–∞–Ω—Å') ? 'fa-wallet' : 'fa-tag';
                    const iconColor = log.type === '–ü–æ–∫—É–ø–∫–∞' ? 'var(--warning)' : 
                                    log.type.includes('–±–∞–ª–∞–Ω—Å') ? 'var(--primary-color)' : 'var(--primary-color)';
                    
                    logItem.innerHTML = `
                        <div class="log-info">
                            <div class="log-action">
                                <i class="fas ${icon}" style="margin-right: 8px; color: ${iconColor}"></i>
                                ${log.type}
                            </div>
                            <div class="log-item-name">${log.itemName}</div>
                            ${log.profitPercent ? `<div class="log-profit" style="color: ${profitColor}">${profitSign}${log.profitPercent}%</div>` : ''}
                        </div>
                        <div class="log-amount" style="color: ${profitColor}">
                            ${profitSign}${log.amount.toLocaleString()} $
                        </div>
                    `;
                    
                    logsList.appendChild(logItem);
                });
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π
            function addTransactionLog(type, itemName, amount, profit, date, profitPercent = null) {
                const log = {
                    type: type,
                    itemName: itemName,
                    amount: amount,
                    profit: profit,
                    date: date,
                    profitPercent: profitPercent
                };
                
                transactionHistory.unshift(log);
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞
            function initChart() {
                profitChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: '–ë–∞–ª–∞–Ω—Å',
                            data: [],
                            borderColor: '#9ca3af',
                            backgroundColor: 'rgba(156, 163, 175, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#6b7280',
                            pointBorderColor: 'white',
                            pointBorderWidth: 2,
                            pointRadius: 6,
                            pointHoverRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'white',
                                    font: {
                                        family: "'Nunito', sans-serif",
                                        weight: '700'
                                    }
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(31, 41, 55, 0.9)',
                                titleColor: 'white',
                                bodyColor: 'white',
                                borderColor: 'rgba(107, 114, 128, 0.5)',
                                borderWidth: 1,
                                padding: 12,
                                cornerRadius: 8
                            }
                        },
                        scales: {
                            x: {
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)',
                                    font: {
                                        family: "'Nunito', sans-serif"
                                    }
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            },
                            y: {
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)',
                                    font: {
                                        family: "'Nunito', sans-serif"
                                    },
                                    callback: function(value) {
                                        return value + ' $';
                                    }
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            }
                        }
                    }
                });
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
            function updateChart() {
                if (transactionHistory.length === 0) {
                    profitChart.data.labels = ['–ù–∞—á–∞–ª–æ'];
                    profitChart.data.datasets[0].data = [balance];
                    profitChart.update();
                    return;
                }
                
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏ –ø–æ –¥–∞—Ç–µ
                const sortedLogs = [...transactionHistory].sort((a, b) => new Date(a.date) - new Date(b.date));
                
                // –°—Ç—Ä–æ–∏–º –∏—Å—Ç–æ—Ä–∏—é –±–∞–ª–∞–Ω—Å–∞
                let currentBalance = balance;
                const labels = ['–ù–∞—á–∞–ª–æ'];
                const balances = [balance];
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ—á–∫–∏ –ø–æ –æ–ø–µ—Ä–∞—Ü–∏—è–º
                sortedLogs.forEach((log, index) => {
                    currentBalance += log.amount;
                    labels.push(`${index + 1}`);
                    balances.push(currentBalance);
                });
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≥—Ä–∞—Ñ–∏–∫
                profitChart.data.labels = labels;
                profitChart.data.datasets[0].data = balances;
                profitChart.update();
            }
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ localStorage
            function saveData() {
                const appData = {
                    inventory: inventory,
                    balance: balance,
                    totalProfit: totalProfit,
                    totalInvestment: totalInvestment,
                    transactionHistory: transactionHistory,
                    userProfile: userProfile
                };
                
                localStorage.setItem('resellCalculatorData', JSON.stringify(appData));
                console.log('–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage:', appData);
            }
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
            function loadData() {
                const savedData = localStorage.getItem('resellCalculatorData');
                
                if (savedData) {
                    try {
                        const data = JSON.parse(savedData);
                        inventory = data.inventory || [];
                        balance = data.balance || 10000;
                        totalProfit = data.totalProfit || 0;
                        totalInvestment = data.totalInvestment || 0;
                        transactionHistory = data.transactionHistory || [];
                        userProfile = data.userProfile || userProfile;
                        console.log('–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ localStorage:', data);
                    } catch (e) {
                        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', e);
                    }
                } else {
                    console.log('–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è');
                }
            }
            
            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
            console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');
            updateUserProfile();
            initChart();
            createSnowflakes();
            setupNavigation();
            updateUI();
            
            // –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º —Å–Ω–µ–∂–∏–Ω–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
            window.addEventListener('resize', function() {
                createSnowflakes();
                updateNavHighlight();
            });
            
            // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ - –¥–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Å–æ–ª—å–Ω—ã–µ –ª–æ–≥–∏
            console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
            console.log('–¢–µ–∫—É—â–∏–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å:', inventory);
            console.log('–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å:', balance);
        });
    </script>
</body>
</html>